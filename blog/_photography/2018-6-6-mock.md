---
date: 2018-6-6
tag: 
 - mock
author: xweb
location: Alanbang
---

# mockjs

### 安装
`npm install mockjs`

### 新建文件夹

**创建mock.js文件到src目录下的任一合适文件内新建mockjs.js，里面放入如下代码,模拟多条数据**

```js

import Mock from 'mockjs'


const Random = Mock.Random;

export default Mock.mock('msg',getData);

function getData(){

  let articles = [];

    for (let i = 0; i < 100; i++) {

        let newArticleObject = {

            title: Random.csentence(5, 30), //  Random.csentence( min, max )

            thumbnail_pic_s: Random.dataImage('300x250', 'mock的图片'), // Random.dataImage( size, text ) 生成一段随机的 Base64 图片编码

            author_name: Random.cname(), // Random.cname() 随机生成一个常见的中文姓名

            date: Random.date() + ' ' + Random.time() // Random.date()指示生成的日期字符串的格式,默认为yyyy-MM-dd；Random.time() 返回一个随机的时间字符串

        }

        articles.push(newArticleObject)

    }

    return {

        articles: articles

    }

}
```

### 组件中使用

```js
import axios from 'axios';
import mockdata from "@/router/mockjs";

mounted(){

        axios.get('msg').then(res=>{

            // this.data1 = res.data;

            console.log(res);

        })

    }
```

**Mock.mock( rurl, rtype, template )参数**

所有的参数多是可选的。

1. rurl 表示需要拦截的 URL，可以是 URL 字符串或 URL 正则。例如
`Mock.mock(/\/proxy\/query_common_credit/,     ---// 匹配所有包含/proxy/query_common_credit的url`

2. rtype 表示需要拦截的 Ajax 请求类型。例如 GET、POST、PUT、DELETE 等。

3. template  
`表示数据模板，可以是对象或字符串。例如 { 'data|1-10':[{}] }或'@EMAIL'。`

4. 当第三个参数是函数的时候。  function(options)  表示用于生成响应数据的函数。把执行结果作为响应数据返回。


**案例:**
1. 统一url存放
```js
export default class mockApi {
      prefix = 'http:/mock.test'

      getTableData = `${mockApi.prefix}/tableDate`
      getSelectData = `${mockApi.prefix}/selectDate`

}
```
2.  存放每个模块所模拟的数据。在mian.js中引入挂载  
`import './uilts/mockjs2' `

```js
import Mock from 'mockjs'

import MockUrl from './mockUrl'       // 导入一个类

Mock.mock(`MockUrl.getTableData`,{
    setTableData: [
        {
            name: 'John Brown',
            age: 18,
            address: 'New York No. 1 Lake Park',
            date: '2016-10-03'
        },
        {
            name: 'Jim Green',
            age: 24,
            address: 'London No. 1 Lake Park',
            date: '2016-10-01'
        },
        {
            name: 'Joe Black',
            age: 30,
            address: 'Sydney No. 1 Lake Park',
            date: '2016-10-02'
        },
        {
            name: 'Jon Snow',
            age: 26,
            address: 'Ottawa No. 2 Lake Park',
            date: '2016-10-04'
        }
    ]
});


Mock.mock(`MockUrl.getSelectData`,{
    setSelectData: [
        {
            name: 'John Brown',
            age: 18,
            address: 'New York No. 1 Lake Park',
            date: '2016-10-03'
        },
        {
            name: 'Jim Green',
            age: 24,
            address: 'London No. 1 Lake Park',
            date: '2016-10-01'
        },
        {
            name: 'Joe Black',
            age: 30,
            address: 'Sydney No. 1 Lake Park',
            date: '2016-10-02'
        },
        {
            name: 'Jon Snow',
            age: 26,
            address: 'Ottawa No. 2 Lake Park',
            date: '2016-10-04'
        },
        {
            name: 'Joe Black',
            age: 30,
            address: 'Sydney No. 1 Lake Park',
            date: '2016-10-02'
        },
        {
            name: 'Jon Snow',
            age: 26,
            address: 'Ottawa No. 2 Lake Park',
            date: '2016-10-04'
        }
    ]
});
```
3. api中使用
```js

import request from '@/evn/axios'


import MockUrl from '@/uilts/mockUrl'       // 导入一个类

export const getMainData = () => {  
    console.log(`${MockUrl.getTableData}`)  // undfind
    console.log(`MockUrl.getTableData`)
    return request({
        url: `MockUrl.getTableData`,
        method: 'get',       
    })
}
export const getMainSelect = () => {  
    return request({
        url: `MockUrl.getSelectData`,
        method: 'get',       
    })
}
```
