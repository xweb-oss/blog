<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /**
     * WebSocket并不是全新的协议，而是利用了HTTP协议来建立连接。我们来看看WebSocket连接是如何创建的。
     * 
     * 1. 首先，WebSocket连接必须由浏览器发起，因为请求协议是一个标准的HTTP请求，格式如下：
     * 
     *  GET: ws://localhost:3000/ws/chat HTTP/1.1
        Host: localhost
        Upgrade: websocket 。
        Connection: Upgrade 。
        Origin: http://localhost:3000 。
        Sec-WebSocket-Key: client-random-string 。
        Sec-WebSocket-Version: 13 。
     * 随后，服务器如果接受该请求，就会返回如下响应：
          HTTP/1.1 101 Switching Protocols
          Upgrade: websocket
          Connection: Upgrade
          Sec-WebSocket-Accept: server-random-string

     * 2.区别 : 该请求和普通的HTTP请求有几点不同：
         2.1 GET请求的地址不是类似/path/，而是以ws://开头的地址；
         2.2 请求头Upgrade: websocket和Connection: Upgrade表示这个连接将要被转换为WebSocket连接;
         2.3 Sec-WebSocket-Key是用于标识这个连接，并非用于加密数据;
         2.4 Sec-WebSocket-Version指定了WebSocket的协议版本。 
       
     * 3. 为什么WebSocket连接可以实现全双工通信而HTTP连接不行呢？
        实际上HTTP协议是建立在TCP协议之上的，TCP协议本身就实现了全双工通信，但是HTTP协议的请求－应答机制限制了全双工通信
    */
  </script>
</body>
</html>